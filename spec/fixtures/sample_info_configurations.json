{"clu":{"auth_partner_id":"e69242d1-4a85-4c26-9689-0786fcb3a869","auth_license_id":"ea070d80-4ca5-4768-8266-16501354e3db","auth_institution_name":"UPMCDOCUMENTSCLU","auth_user_name":"gronaa","auth_endpoint":"https://test.nuanceunderstanding.com/UPMCDOCUMENTSCLU/clu/sdk/session/openSession","proc_endpoint":"https://test.nuanceunderstanding.com/UPMCDOCUMENTSCLU/clu/muse/importdetail/","auth_timeout":20000,"proc_timeout":60000,"businessEntityShortName":"Training","default_worktype":15,"engine_version":20131023,"documentType":"ORIGINAL","documentStatus":"SIGNED","externalID":201,"priority":100,"authorUserID":"author","authorSpecialty":"unknown","engine_connected":true,"disabled":false,"soap_version":1.1,"snomed_problem_whitelist_file":"config/fact_filters/SNOMEDCT_CORE_SUBSET_201308.txt","snomed_problem_hl7_id":"2.16.840.1.113883.6.96","support_email":"upmcenterprisescdrissupport@upmc.edu"},"data_retriever":{"wins":"128.147.17.37","RAKE.SPEC.SMB.TXT":{"SMB":{"type":"smb","domain":"1upmc-acct","username":"user1","password":"MASKED","mime":"text/plain"}},"RAKE.SPEC.HTTP.RTF":{"HTTP":{"type":"http","username":"test","password":"MASKED","mime":"text/rtf"}},"RAKE.SPEC.HTTP.PDF":{"HTTP":{"type":"http","username":"test","password":"MASKED","mime":"application/pdf"}},"RAKE.SPEC.HTTP.DOC":{"HTTP":{"type":"http","username":"test","password":"MASKED","mime":"application/msword"}},"RAKE.SPEC.HTTP.HTML":{"HTTP":{"type":"http","username":"test","password":"MASKED","mime":"text/html"}},"RAKE.SPEC.HTTPS.HTML":{"HTTPS":{"type":"https","username":"test","password":"MASKED","mime":"text/html"}},"RAKE.SPEC.ALL":{"SMB":{"type":"smb","domain":"1upmc-acct","username":"user1","password":"MASKED","mime":"text/plain"},"HTTP":{"type":"http","username":"test","password":"MASKED","mime":"text/html"},"HTTPS":{"type":"https","username":"test","password":"MASKED","mime":"text/html"}},"RAKE.SPEC.INVALID":{"type":"invalid","username":"invalid3","password":"MASKED","mime":"invalid/invalid"},"ENDOWORKS.CHP.DOCUMENT":{"SMB":{"type":"smb","domain":"1upmc-acct","username":"user1","password":"MASKED","mime":"application/pdf"}},"CANOPY.DOCUMENT":{"SMB":{"type":"smb","domain":"1upmc-acct","username":"user1","password":"MASKED","mime":"text/plain"}}},"event_broker":{"host":"localhost","port":5672,"user":"guest","pass":"MASKED","vhost":"/","rabbitmq_timeout":4},"mongo":{"host":"127.0.0.1","port":27017,"alt":[],"write_concern":1,"database":"documents_development"},"named_queries":{"documents_mdb":{"expression":{"collection":"content","queries":[{"query":"[ { \"$match\" : { \"root\": \"documents_patient_document_root\"} }, { \"$project\" : { \"_id\" : 0, \"patient_document_id\" : \"$_id\", \"documents_attr_root\" : \"$root\", \"documents_attr_extension\" : \"$extension\", \"documents_attr_source_last_modified_at\" : \"$source_last_modified_at\"} } ]","parameters":{"patient_document_root":{"data_type":"String","description":"patient document root"}}},{"query":"[ { \"$match\" : { \"root\": \"documents_patient_document_root\", \"extension\": \"documents_patient_document_extension\"} }, { \"$project\" : { \"_id\" : 0, \"patient_document_id\" : \"$_id\", \"documents_attr_root\" : \"$root\", \"documents_attr_extension\" : \"$extension\", \"documents_attr_source_last_modified_at\" : \"$source_last_modified_at\"} } ]","parameters":{"patient_document_root":{"data_type":"String","description":"patient document root"},"patient_document_extension":{"data_type":"String","description":"patient document extension"}}}]},"identity_compatible":true,"output_format":"document_list","output_attributes":{"mandatory":{"patient_document_id":{"description":"patient document id"}},"options":{"root":{"description":"patient document root"},"extension":{"description":"patient document extension"},"source_last_modified_at":{"description":"source last modified at of patient document"}}},"target":"mongodb","description":"Search documents by patient document root"},"documents_mdb_test":{"expression":{"collection":"content","queries":[{"query":"[ { \"$match\" : { \"$and\" : [{\"source_last_modified_at\" : \"documents_source_last_modified_at\"}, {\"root\" : \"documents_patient_document_root\"}] } }, { \"$project\" : { \"_id\" : 0, \"patient_document_id\" : \"$_id\" } } ]","parameters":{"source_last_modified_at":{"data_type":"DateTime","description":"Source last modified at date"},"patient_document_root":{"data_type":"String","description":"Patient document root"}}}]},"identity_compatible":true,"output_format":"document_list","output_attributes":{"mandatory":{"patient_document_id":{"description":"patient document id"}},"options":null},"target":"mongodb","description":"Search documents by patient document root and source last modified at"},"documents_by_patient":{"expression":{"collection":"content","queries":[{"query":"[ { \"$match\" : { \"$and\" : [{\"patient.root\" : \"documents_patient_root\"}, {\"patient.extension\" : \"documents_patient_extension\"} ] } },  {\"$limit\" : 200}, { \"$project\" : { \"_id\" : 0, \"patient_document_id\" : \"$_id\", \"document_root\" : \"$document.root\", \"data_format\" : \"$data_format\", \"data_status\" : \"$data_status\", \"created_at\" : \"$created_at\", \"patient_root\" : \"$patient.root\", \"patient_extension\" : \"$patient.extension\", \"current_document\" : \"$current_document\" } }]","parameters":{"patient_root":{"data_type":"String","description":"patient root"},"patient_extension":{"data_type":"String","description":"Patient extension"}}}]},"identity_compatible":true,"output_format":"document_list","output_attributes":{"mandatory":{"patient_document_id":{"description":"patient document id"},"document_root":{"description":"document root"},"data_format":{"description":"patient document data format"},"data_status":{"description":"patient document data status"},"created_at":{"description":"created at of patient document"},"patient_root":{"description":"patient root"},"patient_extension":{"description":"patient extension"}}},"target":"mongodb","description":"Search documents by patient. Result set capped at 200"},"documents_by_patient_and_document":{"expression":{"collection":"content","queries":[{"query":"[ { \"$match\" : { \"$and\" : [{\"patient.root\" : \"documents_patient_root\"}, {\"patient.extension\" : \"documents_patient_extension\"}, {\"document.root\" : \"documents_document_root\"}, {\"document.extension\" : \"documents_document_extension\"} ] } }, { \"$project\" : { \"_id\" : 0, \"patient_document_id\" : \"$_id\", \"document_root\" : \"$document.root\", \"data_format\" : \"$data_format\", \"data_status\" : \"$data_status\", \"created_at\" : \"$created_at\", \"patient_root\" : \"$patient.root\", \"patient_extension\" : \"$patient.extension\", \"current_document\" : \"$current_document\" } }]","parameters":{"patient_root":{"data_type":"String","description":"patient root"},"patient_extension":{"data_type":"String","description":"Patient extension"},"document_root":{"data_type":"String","description":"document root"},"document_extension":{"data_type":"String","description":"document extension"}}}]},"identity_compatible":true,"output_format":"document_list","output_attributes":{"mandatory":{"patient_document_id":{"description":"patient document id"},"document_root":{"description":"document root"},"data_format":{"description":"patient document data format"},"data_status":{"description":"patient document data status"},"created_at":{"description":"created at of patient document"},"patient_root":{"description":"patient root"},"patient_extension":{"description":"patient extension"}}},"target":"mongodb","description":"Search documents by patient an document"},"documents_by_document_type":{"expression":{"collection":"content","queries":[{"query":"[ { \"$match\" : { \"$and\" : [{\"document.type_root\" : \"documents_document_type_root\"}, {\"document.type_extension\" : \"documents_document_type_extension\"} ] } }, {\"$limit\" : 200}, { \"$project\" : { \"_id\" : 0, \"patient_document_id\" : \"$_id\", \"document_root\" : \"$document.root\", \"data_format\" : \"$data_format\", \"data_status\" : \"$data_status\", \"created_at\" : \"$created_at\", \"patient_root\" : \"$patient.root\", \"patient_extension\" : \"$patient.extension\", \"current_document\" : \"$current_document\" } }]","parameters":{"document_type_root":{"data_type":"String","description":"document type root"},"document_type_extension":{"data_type":"String","description":"document type extension"}}}]},"identity_compatible":false,"output_format":"document_list","output_attributes":{"mandatory":{"patient_document_id":{"description":"patient document id"},"document_root":{"description":"document root"},"data_format":{"description":"patient document data format"},"data_status":{"description":"patient document data status"},"created_at":{"description":"created at of patient document"},"patient_root":{"description":"patient root"},"patient_extension":{"description":"patient extension"}}},"target":"mongodb","description":"Search documents by document type. Result set capped at 200"},"documents_last_processed":{"expression":{"collection":"content","queries":[{"query":"[ { \"$sort\" : { \"created_at\" : -1 } }, {\"$limit\" : 200}, { \"$project\" : { \"_id\" : 0, \"patient_document_id\" : \"$_id\", \"document_root\" : \"$document.root\", \"data_format\" : \"$data_format\", \"data_status\" : \"$data_status\", \"created_at\" : \"$created_at\", \"patient_root\" : \"$patient.root\", \"patient_extension\" : \"$patient.extension\", \"current_document\" : \"$current_document\" } }]"}]},"identity_compatible":false,"output_format":"document_list","output_attributes":{"mandatory":{"patient_document_id":{"description":"patient document id"},"document_root":{"description":"document root"},"data_format":{"description":"patient document data format"},"data_status":{"description":"patient document data status"},"created_at":{"description":"created at of patient document"},"patient_root":{"description":"patient root"},"patient_extension":{"description":"patient extension"}}},"target":"mongodb","description":"Last processed documents. Result set capped at 200"}},"patient_identity":{"username":null,"password":"MASKED","protocol":"https","host":"localhost","port":3002,"self_signed_allowed":true,"root_path":"/api/v1","disabled":false},"statsd":{"host":"127.0.0.1","port":8125},"security":{"username":"MASKED","password":"MASKED","basic_auth_whitelist":[{"hosts":["documents-front2.hosts.upmc.edu"],"accessible_endpoints":[{"path":"api/v1/patient_document","actions":["create"]},{"path":"api/v1/map_type","actions":["create"]},{"path":"api/v1/patient_document","actions":["show"]}]}],"disabled":true},"subscriber_retry":{"CluPatientDocumentSearchCloudManagement":[5,4,3,2,1],"RequestCluProcessPatientDocument":[5,4,3,2,1],"PatientDocumentDataRetriever":[5,4,3,2,1],"ValidatePatientDocument":[5,4,3,2,1]},"subscribers":{"publish_document_processed_event":false,"processes":{"proc_1":{"jruby_memory_max":"-J-Xmx128m","thread_types":[{"klass":"Subscriber::ValidatePatientDocument","threads":1,"queue":"patient_documents_for_validation"}]},"proc_2":{"jruby_memory_max":"-J-Xmx128m","thread_types":[{"klass":"Subscriber::PatientDocumentDataRetriever","threads":1,"queue":"patient_documents_requiring_data_retrieval"}]},"proc_3":{"jruby_memory_max":"-J-Xmx128m","thread_types":[{"klass":"Subscriber::RequestCluProcessPatientDocument","threads":2,"queue":"patient_documents_for_clu_processing"}]},"proc_4":{"jruby_memory_max":"-J-Xmx128m","thread_types":[{"klass":"Subscriber::CluPatientDocumentSearchCloudManagement","threads":2,"queue":"clu_patient_documents_for_search_cloud_processing"}]}}},"transformers_clu":{"problem":{"name":"problems","namespaces":{"n1":"urn:hl7-org:v3","n2":"urn:hl7-org:v3/meta/voc","voc":"urn:hl7-org:v3/voc","sdtc":"urn:hl7-org:sdtc","xsi":"http://www.w3.org/2001/XMLSchema-instance","xalan":"http://xml.apache.org/xalan","java":"http://xml.apache.org/xslt/java"},"xpath":"n1:ClinicalDocument/n1:component/n1:structuredBody/n1:component/n1:section/n1:entry//n1:act/n1:entryRelationship/n1:observation","facts":{"effective_time":"./n1:effectiveTime/@value","effective_time_low":"./n1:effectiveTime/n1:low/@value","text_pointer":"./n1:text/n1:reference/@value","text":"../../../../n1:text//n1:content[contains($text_pointer_name, @ID)]/text()","prob_code_numeric":"./n1:value/@code","prob_code_system":"./n1:value/@codeSystem","prob_code_system_name":"./n1:value/@codeSystemName","prob_code_name":"./n1:value/@displayName","prob_status":"./n1:entryRelationship/n1:observation/n1:value/@displayName","translated_code_numeric":"./n1:value/n1:translation/@code","translated_code_system":"./n1:value/n1:translation/@codeSystem","translated_code_system_name":"./n1:value/n1:translation/@codeSystemName","translated_code_name":"./n1:value/n1:translation/@displayName","provider_name_prefix":"./n1:assignedEntity/n1:assignedPerson/n1:name/n1:prefix","provider_name_given":"./n1:assignedEntity/n1:assignedPerson/n1:name/n1:given","provider_name_family":"./n1:assignedEntity/n1:assignedPerson/n1:name/n1:family","negation":"./n1:entryRelationship/@negationInd","section_title":"../../../../n1:title/text()","section_code":"../../../../n1:code/@code","section_code_system":"../../../../n1:code/@codeSystem","section_code_system_name":"../../../../n1:code/@codeSystemName","section_display_name":"../../../../n1:code/@displayName"},"variables":{"text_pointer_name":"./n1:text/n1:reference/@value"}},"procedure":{"name":"procedures","namespaces":{"n1":"urn:hl7-org:v3","n2":"urn:hl7-org:v3/meta/voc","voc":"urn:hl7-org:v3/voc","sdtc":"urn:hl7-org:sdtc","xsi":"http://www.w3.org/2001/XMLSchema-instance","xalan":"http://xml.apache.org/xalan","java":"http://xml.apache.org/xslt/java"},"xpath":"n1:ClinicalDocument/n1:component/n1:structuredBody/n1:component/n1:section/n1:entry/n1:procedure","facts":{"proc_code":"./n1:code/@code","proc_code_system":"./n1:code/@codeSystem","proc_code_system_name":"./n1:code/@codeSystemName","proc_code_name":"./n1:code/@displayName","text_pointer":"./n1:code/n1:originalText/n1:reference/@value","text":"../../../..//n1:text//n1:content[contains($text_pointer_name, @ID)]/text()","proc_status":"./n1:statusCode/@code","negation":"./@negationInd","section_title":"../../..//n1:section/n1:title/text()","section_code":"../../..//n1:section/n1:code/@code","section_code_system":"../../..//n1:section/n1:code/@codeSystem","section_code_system_name":"../../..//n1:section/n1:code/@codeSystemName","section_display_name":"../../..//n1:section/n1:code/@displayName"},"variables":{"text_pointer_name":"./n1:code/n1:originalText/n1:reference/@value"}},"section":{"name":"sections","namespaces":{"n1":"urn:hl7-org:v3","n2":"urn:hl7-org:v3/meta/voc","voc":"urn:hl7-org:v3/voc","sdtc":"urn:hl7-org:sdtc","xsi":"http://www.w3.org/2001/XMLSchema-instance","xalan":"http://xml.apache.org/xalan","java":"http://xml.apache.org/xslt/java","fn":"http://www.w3.org/2005/xpath-functions"},"xpath":"n1:ClinicalDocument/n1:component/n1:structuredBody/n1:component/n1:section","facts":{"section_code":"./n1:code/@code","section_code_system":"./n1:code/@codeSystem","section_code_system_name":"./n1:code/@codeSystemName","section_display_name":"./n1:code/@displayName","section_title":"./n1:title/text()","section_text":"./n1:text//n1:content/text()"},"variables":{"text_pointer_name":"substring(./n1:text/n1:reference/@value, 2)"}},"medication":{"name":"medications","namespaces":{"n1":"urn:hl7-org:v3","n2":"urn:hl7-org:v3/meta/voc","voc":"urn:hl7-org:v3/voc","sdtc":"urn:hl7-org:sdtc","xsi":"http://www.w3.org/2001/XMLSchema-instance","xalan":"http://xml.apache.org/xalan","java":"http://xml.apache.org/xslt/java"},"xpath":"n1:ClinicalDocument/n1:component/n1:structuredBody/n1:component/n1:section/n1:entry/n1:substanceAdministration","facts":{"med_product_display_name":"./n1:consumable/n1:manufacturedProduct/n1:manufacturedMaterial/n1:code/@displayName","med_product_code":"./n1:consumable/n1:manufacturedProduct/n1:manufacturedMaterial/n1:code/@code","med_product_code_system":"./n1:consumable/n1:manufacturedProduct/n1:manufacturedMaterial/n1:code/@codeSystem","med_product_code_system_name":"./n1:consumable/n1:manufacturedProduct/n1:manufacturedMaterial/n1:code/@codeSystemName","med_brand_name":"./n1:consumable/n1:manufacturedProduct/n1:manufacturedMaterial/n1:name/text()","med_status":".//n1:entryRelationship[@typeCode='REFR']/n1:observation[code/@code='33999-4']/n1:value/@displayName","med_route_code":"./n1:routeCode/@code","med_route_code_system":"./n1:routeCode/@codeSystem","med_route_code_system_name":"./n1:routeCode/@codeSystemName","med_route_display_name":"./n1:routeCode/@displayName","med_start_date":"./n1:effectiveTime[1]/n1:low/@value","med_end_date":"./n1:effectiveTime[1]/n1:high/@value","med_frequency_value":"./n1:effectiveTime[@*[name()='xsi:type']='PIVL_TS']/n1:period/@value","med_frequency_unit":"./n1:effectiveTime[@*[name()='xsi:type']='PIVL_TS']/n1:period/@unit","med_dose_value":"./n1:doseQuantity/@value","med_dose_unit":"./n1:doseQuantity/@unit","text_pointer":"./n1:text/n1:reference/@value","text":"../../../..//n1:text//n1:content[contains($text_pointer_name, @ID)]/text()","negation":"./@negationInd","section_title":"../../..//n1:section/n1:title/text()","section_code":"../../..//n1:section/n1:code/@code","section_code_system":"../../..//n1:section/n1:code/@codeSystem","section_code_system_name":"../../..//n1:section/n1:code/@codeSystemName","section_display_name":"../../..//n1:section/n1:code/@displayName"},"variables":{"text_pointer_name":"./n1:text/n1:reference/@value"}},"laboratory_study":{"name":"laboratory_studies","namespaces":{"n1":"urn:hl7-org:v3","n2":"urn:hl7-org:v3/meta/voc","voc":"urn:hl7-org:v3/voc","sdtc":"urn:hl7-org:sdtc","xsi":"http://www.w3.org/2001/XMLSchema-instance","xalan":"http://xml.apache.org/xalan","java":"http://xml.apache.org/xslt/java"},"xpath":"n1:ClinicalDocument/n1:component/n1:structuredBody/n1:component/n1:section/n1:entry/n1:organizer[n1:code/@code='397820001']/n1:component/n1:observation","facts":{"text_pointer":"./n1:text/n1:reference/@value","text":"../../../../n1:text//n1:content[contains($text_pointer_name, @ID)]/text()","laboratory_study_code_numeric":"./n1:code/@code","laboratory_study_code_system":"./n1:code/@codeSystem","laboratory_study_code_system_name":"./n1:code/@codeSystemName","laboratory_study_display_name":"./n1:code/@displayName","laboratory_study_translation_code_numeric":"./n1:code/n1:translation/@code","laboratory_study_translation_code_system":"./n1:code/n1:translation/@codeSystem","laboratory_study_translation_code_system_name":"./n1:code/n1:translation/@codeSystemName","laboratory_study_translation_display_name":"./n1:code/n1:translation/@displayName","laboratory_study_value":"./n1:value[@*[name()='xsi:type']!='IVL_PQ']/@value","laboratory_study_unit_of_measure":"./n1:value[@*[name()='xsi:type']!='IVL_PQ']/@unit","laboratory_study_low_value":"./n1:value[@*[name()='xsi:type']='IVL_PQ']/n1:low/@value","laboratory_study_low_value_unit_of_measure":"./n1:value[@*[name()='xsi:type']='IVL_PQ']/n1:low/@unit","laboratory_study_high_value":"./n1:value[@*[name()='xsi:type']='IVL_PQ']/n1:high/@value","laboratory_study_high_value_unit_of_measure":"./n1:value[@*[name()='xsi:type']='IVL_PQ']/n1:high/@unit","section_title":"../../../../n1:title/text()","section_code":"../../../../n1:code/@code","section_code_system":"../../../../n1:code/@codeSystem","section_code_system_name":"../../../../n1:code/@codeSystemName","section_display_name":"../../../../n1:code/@displayName"},"variables":{"text_pointer_name":"./n1:text/n1:reference/@value"}},"social_history":{"name":"social_history","namespaces":{"n1":"urn:hl7-org:v3","n2":"urn:hl7-org:v3/meta/voc","voc":"urn:hl7-org:v3/voc","sdtc":"urn:hl7-org:sdtc","xsi":"http://www.w3.org/2001/XMLSchema-instance","xalan":"http://xml.apache.org/xalan","java":"http://xml.apache.org/xslt/java"},"xpath":"n1:ClinicalDocument/n1:component/n1:structuredBody/n1:component/n1:section/n1:entry/n1:observation","facts":{"text_pointer":"./n1:code/n1:originalText/n1:reference/@value","text":"../../n1:text//n1:content[contains($text_pointer_name, @ID)]/text()","social_history_code_numeric":"./n1:code/@code","social_history_code_system":"./n1:code/@codeSystem","social_history_code_system_name":"./n1:code/@codeSystemName","social_history_display_name":"./n1:code/@displayName","negation":"./n1:entryRelationship/@negationInd","section_title":"../../n1:title/text()","section_code":"../../n1:code/@code","section_code_system":"../../n1:code/@codeSystem","section_code_system_name":"../../n1:code/@codeSystemName","section_display_name":"../../n1:code/@displayName"},"variables":{"text_pointer_name":"./n1:text/n1:reference/@value"}},"vital_sign":{"name":"vital_signs","namespaces":{"n1":"urn:hl7-org:v3","n2":"urn:hl7-org:v3/meta/voc","voc":"urn:hl7-org:v3/voc","sdtc":"urn:hl7-org:sdtc","xsi":"http://www.w3.org/2001/XMLSchema-instance","xalan":"http://xml.apache.org/xalan","java":"http://xml.apache.org/xslt/java"},"xpath":"n1:ClinicalDocument/n1:component/n1:structuredBody/n1:component/n1:section/n1:entry/n1:organizer[n1:code/@code='46680005']/n1:component/n1:observation","facts":{"text_pointer":"./n1:text/n1:reference/@value","text":"../../../../n1:text//n1:content[contains($text_pointer_name, @ID)]/text()","vital_sign_code_numeric":"./n1:code/@code","vital_sign_code_system":"./n1:code/@codeSystem","vital_sign_code_system_name":"./n1:code/@codeSystemName","vital_sign_display_name":"./n1:code/@displayName","vital_sign_translation_code_numeric":"./n1:code/n1:translation/@code","vital_sign_translation_code_system":"./n1:code/n1:translation/@codeSystem","vital_sign_translation_code_system_name":"./n1:code/n1:translation/@codeSystemName","vital_sign_translation_display_name":"./n1:code/n1:translation/@displayName","vital_sign_value":"./n1:value/@value","vital_sign_unit_of_measure":"./n1:value/@unit","section_title":"../../../../n1:title/text()","section_code":"../../../../n1:code/@code","section_code_system":"../../../../n1:code/@codeSystem","section_code_system_name":"../../../../n1:code/@codeSystemName","section_display_name":"../../../../n1:code/@displayName"},"variables":{"text_pointer_name":"./n1:text/n1:reference/@value"}}}}
